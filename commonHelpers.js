import{S as q,b as j}from"./assets/vendor-79407357.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const y="b210b8c265aa45ab35b8876089232222",P="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiMjEwYjhjMjY1YWE0NWFiMzViODg3NjA4OTIzMjIyMiIsInN1YiI6IjY2M2JjY2JlYmRjMjJhNDAxNjAxMDk3NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zjkAl594EP84PYZFIQ6iSotECJtDLEMUn35DsNJdj60",h={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${P}`}},b="https://api.themoviedb.org/3";async function M(t,e){const a=new URLSearchParams({api_key:y,include_adult:!1,language:"en-US",page:e,query:t});return(await fetch(`${b}/search/movie?${a}`,h)).json()}async function x(t){const e=new URLSearchParams({api_key:y,language:"en-US"});return(await fetch(`${b}/movie/${t}?${e}`,h)).json()}async function _(){const t=new URLSearchParams({api_key:y,language:"en-US",page:1});return(await fetch(`${b}/movie/popular?${t}`,h)).json()}async function I(t){const e=new URLSearchParams({api_key:y,language:"en-US"});return(await fetch(`${b}/movie/${t}/videos?${e}`,h)).json()}$();let n=1;const E=document.querySelector(".header-search");E.addEventListener("submit",t=>{const e=document.querySelector(".library-page");n=1,e.textContent=n,f(t)});const g=document.querySelector(".library-prev-btn"),v=document.querySelector(".library-next-btn");g.addEventListener("click",C);v.addEventListener("click",N);function C(){const t=document.querySelector(".library-page");n--,f(event),t.textContent=n,window.scrollTo({top:0,behavior:"smooth"})}function N(){const t=document.querySelector(".library-page");n++,f(event),t.textContent=n,window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("popstate",T);function T(t){const e=location.pathname;if(e==="/popular")n=1,$();else if(e.startsWith("/search/")){const a=e.substring(8).split("/"),s=a[0]||1,r=a[1]||"";n=parseInt(s,10),f({target:{elements:{"header-search-input":{value:r}}}})}}async function f(t){t.preventDefault();const e=E.querySelector(".header-search-input"),a=document.querySelector(".library-list"),s=document.querySelector(".library-loader"),r=document.querySelector(".library-message"),o=document.querySelector(".library-title"),l=document.querySelector(".library-pagination");s.classList.remove("hide"),a.innerHTML="";try{const i=await M(e.value.trim(),n);if(o.innerHTML=`Search query: <span>${e.value.trim()}</span>`,!i.results.length)r.classList.add("active"),l.classList.remove("active");else{r.classList.remove("active");const u=i.results.map(({id:S,title:m,overview:L,release_date:p,vote_average:c,poster_path:w})=>w?`
          <li class="library-item">
          <img src="https://image.tmdb.org/t/p/w500/${w}" alt="${m}" class="library-item-poster" />
          <div class="library-item-content">
          <h3 class="library-item-title">${m}</h3>
          <p class="library-item-date library-item-text">Release date: <span>${p}</span></p>
          <p class="library-item-rate library-item-text">Rating: <span>${c}</span></p>
          <button type="button" class="library-item-btn" data-id="${S}">Read more</button>
          </div>
          </li>
          `:"").join("");a.insertAdjacentHTML("beforeend",u),l.classList.add("active");const d=i.total_pages;n>=d?v.disabled=!0:v.disabled=!1,n<=1?g.disabled=!0:g.disabled=!1}e.value.trim()?history.pushState({},"",`/search/${e.value.trim()}/${n}`):history.pushState({},"","/popular")}catch(i){console.log(i)}finally{s.classList.add("hide")}}async function $(){const t=document.querySelector(".library-list"),e=document.querySelector(".library-loader");history.pushState({},"","/popular"),t.innerHTML="",e.classList.remove("hide");try{const s=(await _()).results.map(({id:r,title:o,overview:l,release_date:i,vote_average:u,poster_path:d})=>d?`
        <li class="library-item">
          <img src="https://image.tmdb.org/t/p/w500/${d}" alt="${o}" class="library-item-poster" />
          <div class="library-item-content">
            <h3 class="library-item-title">${o}</h3>
            <p class="library-item-date library-item-text">Release date: <span>${i}</span></p>
            <p class="library-item-rate library-item-text">Rating: <span>${u}</span></p>
            <button type="button" class="library-item-btn" data-id="${r}">Read more</button>
          </div>
        </li>
      `:"").join("");t.insertAdjacentHTML("beforeend",s)}catch(a){console.log(a)}finally{e.classList.add("hide")}}const J=document.querySelector(".library-list"),O=document.querySelector(".modal-close-btn");O.addEventListener("click",t=>{t.target.closest(".backdrop").classList.remove("active"),document.body.style.overflow=null});J.addEventListener("click",R);async function R(t){if(t.target.classList.contains("library-item-btn")){const e=t.target.dataset.id,a=document.querySelector(".modal-loader"),s=document.querySelector(".modal");a.classList.remove("hide");try{const r=await x(e),{id:o,poster_path:l,title:i,status:u,release_date:d,genres:S,vote_average:m,overview:L}=r,p=s.querySelector(".modal-video-btn"),c={img:s.querySelector(".modal-img"),title:s.querySelector(".modal-title"),status:s.querySelector(".modal-status span"),release:s.querySelector(".modal-released span"),rating:s.querySelector(".modal-rating span"),descr:s.querySelector(".modal-descr")};c.img.src=`https://image.tmdb.org/t/p/w500/${l}`,c.img.alt=i,c.title.textContent=i,c.status.textContent=u,c.release.textContent=d,c.rating.textContent=m,c.descr.textContent=L,p.dataset.id=o,s.classList.add("active"),document.body.style.overflow="hidden",p.addEventListener("click",U)}catch(r){console.log(r)}finally{a.classList.add("hide")}}}async function U(t){const e=t.currentTarget.dataset.id;try{const a=await I(e);if(!a.results.length)q.fire({icon:"error",title:"Oops...",text:"We couldn't find the trailer for this movie"});else{const s=a.results[0].key;j.create(`
    <iframe src="https://www.youtube.com/embed/${s}" width="800" height="500" frameborder="0"></iframe>
  `).show()}}catch(a){console.log(a)}}
//# sourceMappingURL=commonHelpers.js.map
