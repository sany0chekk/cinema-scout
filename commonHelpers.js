import{S as g,b as v}from"./assets/vendor-79407357.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const y={}.VITE_API_KEY,L={}.VITE_AUTH_TOKEN,p={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${L}`}},f="https://api.themoviedb.org/3";async function w(t){const r=new URLSearchParams({api_key:y,include_adult:!1,language:"en-US",page:1,query:t});return(await fetch(`${f}/search/movie?${r}`,p)).json()}async function S(t){const r=new URLSearchParams({api_key:y,language:"en-US"});return(await fetch(`${f}/movie/${t}?${r}`,p)).json()}async function $(){const t=new URLSearchParams({api_key:y,language:"en-US",page:1});return(await fetch(`${f}/movie/popular?${t}`,p)).json()}async function _(t){const r=new URLSearchParams({api_key:y,language:"en-US"});return(await fetch(`${f}/movie/${t}/videos?${r}`,p)).json()}const E=document.querySelector(".header-search");E.addEventListener("submit",q);async function q(t){t.preventDefault();const r=t.currentTarget.elements.movie,a=document.querySelector(".library-list"),o=document.querySelector(".library-loader");try{const e=await w(r.value.trim());a.innerHTML="",o.classList.remove("hide");const s=e.results.map(({id:i,title:c,overview:u,release_date:d,vote_average:h,poster_path:m})=>m?`
        <li class="library-item">
          <img src="https://image.tmdb.org/t/p/w500/${m}" alt="${c}" class="library-item-poster" />
          <div class="library-item-content">
            <h3 class="library-item-title">${c}</h3>
            <p class="library-item-date library-item-text">Release date: <span>${d}</span></p>
            <p class="library-item-rate library-item-text">Rating: <span>${h}</span></p>
            <button type="button" class="library-item-btn" data-id="${i}">Read more</button>
          </div>
        </li>
      `:"").join("");a.insertAdjacentHTML("beforeend",s)}catch(e){console.log(e)}finally{o.classList.add("hide")}}async function T(){const t=document.querySelector(".library-list"),r=document.querySelector(".library-loader");try{const a=await $();t.innerHTML="",r.classList.remove("hide");const o=a.results.map(({id:e,title:s,overview:i,release_date:c,vote_average:u,poster_path:d})=>d?`
        <li class="library-item">
          <img src="https://image.tmdb.org/t/p/w500/${d}" alt="${s}" class="library-item-poster" />
          <div class="library-item-content">
            <h3 class="library-item-title">${s}</h3>
            <p class="library-item-date library-item-text">Release date: <span>${c}</span></p>
            <p class="library-item-rate library-item-text">Rating: <span>${u}</span></p>
            <button type="button" class="library-item-btn" data-id="${e}">Read more</button>
          </div>
        </li>
      `:"").join("");t.insertAdjacentHTML("beforeend",o)}catch(a){console.log(a)}finally{r.classList.add("hide")}}T();const x=document.querySelector(".library-list"),M=document.querySelector(".modal-close-btn");M.addEventListener("click",t=>{t.target.closest(".backdrop").classList.remove("active"),document.body.style.overflow=null});x.addEventListener("click",P);async function P(t){if(t.target.classList.contains("library-item-btn")){const r=t.target.dataset.id,a=document.querySelector(".modal-loader");try{const o=await S(r);a.classList.remove("hide");const{id:e,poster_path:s,title:i,status:c,release_date:u,genres:d,vote_average:h,overview:m}=o,n=document.querySelector(".modal"),b=n.querySelector(".modal-video-btn"),l={img:n.querySelector(".modal-img"),title:n.querySelector(".modal-title"),status:n.querySelector(".modal-status span"),release:n.querySelector(".modal-released span"),rating:n.querySelector(".modal-rating span"),descr:n.querySelector(".modal-descr")};l.img.src=`https://image.tmdb.org/t/p/w500/${s}`,l.img.alt=i,l.title.textContent=i,l.status.textContent=c,l.release.textContent=u,l.rating.textContent=h,l.descr.textContent=m,b.dataset.id=e,n.classList.add("active"),document.body.style.overflow="hidden",b.addEventListener("click",R)}catch(o){console.log(o)}finally{a.classList.add("hide")}}}async function R(t){const r=t.currentTarget.dataset.id;try{const a=await _(r);if(!a.results.length)g.fire({icon:"error",title:"Oops...",text:"We couldn't find the trailer for this movie"});else{const o=a.results[0].key;v.create(`
    <iframe src="https://www.youtube.com/embed/${o}" width="800" height="500" frameborder="0"></iframe>
  `).show()}}catch(a){console.log(a)}}
//# sourceMappingURL=commonHelpers.js.map
