{"version":3,"file":"commonHelpers.js","sources":["../src/js/movie-api.js","../src/js/render-list.js","../src/js/render-movie-info.js"],"sourcesContent":["'use strict';\n\nconst API_KEY = 'b210b8c265aa45ab35b8876089232222';\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiMjEwYjhjMjY1YWE0NWFiMzViODg3NjA4OTIzMjIyMiIsInN1YiI6IjY2M2JjY2JlYmRjMjJhNDAxNjAxMDk3NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zjkAl594EP84PYZFIQ6iSotECJtDLEMUn35DsNJdj60',\n  },\n};\n\nexport async function fetchMoviesList(query) {\n  const BASE_URL = 'https://api.themoviedb.org/3/search/movie';\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    include_adult: false,\n    language: 'en-US',\n    page: 1,\n    query,\n  });\n\n  const result = await fetch(`${BASE_URL}?${params}`, options);\n  return result.json();\n}\n\nexport async function fetchMovie(id) {\n  const BASE_URL = 'https://api.themoviedb.org/3/movie';\n  const params = new URLSearchParams({\n    language: 'en-US',\n  });\n\n  const result = await fetch(`${BASE_URL}/${id}?${params}`, options);\n  return result.json();\n}\n","'use strict';\n\nimport { fetchMoviesList } from './movie-api';\n\nconst searchForm = document.querySelector('.header-search');\nsearchForm.addEventListener('submit', renderElements);\n\nasync function renderElements(event) {\n  event.preventDefault();\n  const movieName = event.currentTarget.elements.movie;\n  const libraryEl = document.querySelector('.library-list');\n  const loader = document.querySelector('.library-loader');\n\n  try {\n    const data = await fetchMoviesList(movieName.value.trim());\n\n    libraryEl.innerHTML = '';\n    loader.classList.remove('hide');\n\n    const markup = data.results\n      .map(\n        ({\n          id,\n          title,\n          overview,\n          release_date: date,\n          vote_average: rate,\n          poster_path: img,\n        }) => {\n          if (!img) {\n            return ''; // повертаємо порожній рядок, якщо немає poster_path\n          }\n\n          return `\n        <li class=\"library-item\">\n          <img src=\"https://image.tmdb.org/t/p/w500/${img}\" alt=\"${title}\" class=\"library-item-poster\" />\n          <div class=\"library-item-content\">\n            <h3 class=\"library-item-title\">${title}</h3>\n            <p class=\"library-item-date library-item-text\">Release date: <span>${date}</span></p>\n            <p class=\"library-item-rate library-item-text\">Rating: <span>${rate}</span></p>\n            <button type=\"button\" class=\"library-item-btn\" data-id=\"${id}\">Read more</button>\n          </div>\n        </li>\n      `;\n        }\n      )\n      .join('');\n    libraryEl.insertAdjacentHTML('beforeend', markup);\n    console.log(data);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('hide');\n  }\n}\n","'use strict';\nimport { fetchMovie } from './movie-api';\n\nconst libraryEl = document.querySelector('.library-list');\nconst modalCloseBtn = document.querySelector('.modal-close-btn');\n\nmodalCloseBtn.addEventListener('click', event => {\n  event.target.closest('.backdrop').classList.remove('active');\n  document.body.style.overflow = null;\n});\n\nlibraryEl.addEventListener('click', renderMovieInfo);\n\nasync function renderMovieInfo(event) {\n  if (event.target.classList.contains('library-item-btn')) {\n    const id = event.target.dataset.id;\n    const loader = document.querySelector('.modal-loader');\n\n    try {\n      const data = await fetchMovie(id);\n\n      loader.classList.remove('hide');\n\n      const {\n        poster_path: img,\n        original_title: title,\n        status,\n        release_date,\n        genres,\n        vote_average: rating,\n        overview,\n      } = data;\n\n      const modalEl = document.querySelector('.modal');\n      const modalElements = {\n        img: modalEl.querySelector('.modal-img'),\n        title: modalEl.querySelector('.modal-title'),\n        status: modalEl.querySelector('.modal-status span'),\n        release: modalEl.querySelector('.modal-released span'),\n        rating: modalEl.querySelector('.modal-rating span'),\n        descr: modalEl.querySelector('.modal-descr'),\n      };\n      modalElements.img.src = `https://image.tmdb.org/t/p/w500/${img}`;\n      modalElements.img.alt = title;\n      modalElements.title.textContent = title;\n      modalElements.status.textContent = status;\n      modalElements.release.textContent = release_date;\n      modalElements.rating.textContent = rating;\n      modalElements.descr.textContent = overview;\n\n      modalEl.classList.add('active');\n      document.body.style.overflow = 'hidden';\n    } catch (error) {\n      console.log(error);\n    } finally {\n      loader.classList.add('hide');\n    }\n  }\n}\n"],"names":["API_KEY","options","fetchMoviesList","query","BASE_URL","params","fetchMovie","id","searchForm","renderElements","event","movieName","libraryEl","loader","data","markup","title","overview","date","rate","img","error","modalCloseBtn","renderMovieInfo","status","release_date","genres","rating","modalEl","modalElements"],"mappings":"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"}