{"version":3,"file":"commonHelpers.js","sources":["../src/js/movie-api.js","../src/js/render-list.js","../src/js/render-movie-info.js"],"sourcesContent":["'use strict';\n\nconst API_KEY = import.meta.env.VITE_API_KEY;\nconst AUTH_TOKEN = import.meta.env.VITE_AUTH_TOKEN;\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${AUTH_TOKEN}`,\n  },\n};\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nexport async function fetchMoviesList(query) {\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    include_adult: false,\n    language: 'en-US',\n    page: 1,\n    query,\n  });\n\n  const result = await fetch(`${BASE_URL}/search/movie?${params}`, options);\n  return result.json();\n}\n\nexport async function fetchMovie(id) {\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    language: 'en-US',\n  });\n\n  const result = await fetch(`${BASE_URL}/movie/${id}?${params}`, options);\n  return result.json();\n}\n\nexport async function fetchPopularMovies() {\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    language: 'en-US',\n    page: 1,\n  });\n\n  const result = await fetch(`${BASE_URL}/movie/popular?${params}`, options);\n  return result.json();\n}\n\nexport async function fetchMovieTrailer(id) {\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    language: 'en-US',\n  });\n\n  const result = await fetch(\n    `${BASE_URL}/movie/${id}/videos?${params}`,\n    options\n  );\n  return result.json();\n}\n","'use strict';\n\nimport { fetchMoviesList, fetchPopularMovies } from './movie-api';\n\nconst searchForm = document.querySelector('.header-search');\nsearchForm.addEventListener('submit', renderElements);\n\nasync function renderElements(event) {\n  event.preventDefault();\n  const movieName = event.currentTarget.elements.movie;\n  const libraryEl = document.querySelector('.library-list');\n  const loader = document.querySelector('.library-loader');\n\n  try {\n    const data = await fetchMoviesList(movieName.value.trim());\n\n    libraryEl.innerHTML = '';\n    loader.classList.remove('hide');\n\n    const markup = data.results\n      .map(\n        ({\n          id,\n          title,\n          overview,\n          release_date: date,\n          vote_average: rate,\n          poster_path: img,\n        }) => {\n          if (!img) {\n            return '';\n          }\n\n          return `\n        <li class=\"library-item\">\n          <img src=\"https://image.tmdb.org/t/p/w500/${img}\" alt=\"${title}\" class=\"library-item-poster\" />\n          <div class=\"library-item-content\">\n            <h3 class=\"library-item-title\">${title}</h3>\n            <p class=\"library-item-date library-item-text\">Release date: <span>${date}</span></p>\n            <p class=\"library-item-rate library-item-text\">Rating: <span>${rate}</span></p>\n            <button type=\"button\" class=\"library-item-btn\" data-id=\"${id}\">Read more</button>\n          </div>\n        </li>\n      `;\n        }\n      )\n      .join('');\n    libraryEl.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('hide');\n  }\n}\n\nasync function renderPopularMovies() {\n  const libraryEl = document.querySelector('.library-list');\n  const loader = document.querySelector('.library-loader');\n\n  try {\n    const data = await fetchPopularMovies();\n\n    libraryEl.innerHTML = '';\n    loader.classList.remove('hide');\n\n    const markup = data.results\n      .map(\n        ({\n          id,\n          title,\n          overview,\n          release_date: date,\n          vote_average: rate,\n          poster_path: img,\n        }) => {\n          if (!img) {\n            return '';\n          }\n\n          return `\n        <li class=\"library-item\">\n          <img src=\"https://image.tmdb.org/t/p/w500/${img}\" alt=\"${title}\" class=\"library-item-poster\" />\n          <div class=\"library-item-content\">\n            <h3 class=\"library-item-title\">${title}</h3>\n            <p class=\"library-item-date library-item-text\">Release date: <span>${date}</span></p>\n            <p class=\"library-item-rate library-item-text\">Rating: <span>${rate}</span></p>\n            <button type=\"button\" class=\"library-item-btn\" data-id=\"${id}\">Read more</button>\n          </div>\n        </li>\n      `;\n        }\n      )\n      .join('');\n    libraryEl.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('hide');\n  }\n}\n\nrenderPopularMovies();\n","'use strict';\n\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nimport Swal from 'sweetalert2';\n\nimport { fetchMovie, fetchMovieTrailer } from './movie-api';\n\nconst libraryEl = document.querySelector('.library-list');\nconst modalCloseBtn = document.querySelector('.modal-close-btn');\n\nmodalCloseBtn.addEventListener('click', event => {\n  event.target.closest('.backdrop').classList.remove('active');\n  document.body.style.overflow = null;\n});\n\nlibraryEl.addEventListener('click', renderMovieInfo);\n\nasync function renderMovieInfo(event) {\n  if (event.target.classList.contains('library-item-btn')) {\n    const id = event.target.dataset.id;\n    const loader = document.querySelector('.modal-loader');\n\n    try {\n      const data = await fetchMovie(id);\n\n      loader.classList.remove('hide');\n\n      const {\n        id: videoID,\n        poster_path: img,\n        title,\n        status,\n        release_date,\n        genres,\n        vote_average: rating,\n        overview,\n      } = data;\n\n      const modalEl = document.querySelector('.modal');\n      const modalVideoBtn = modalEl.querySelector('.modal-video-btn');\n      const modalElements = {\n        img: modalEl.querySelector('.modal-img'),\n        title: modalEl.querySelector('.modal-title'),\n        status: modalEl.querySelector('.modal-status span'),\n        release: modalEl.querySelector('.modal-released span'),\n        rating: modalEl.querySelector('.modal-rating span'),\n        descr: modalEl.querySelector('.modal-descr'),\n      };\n      modalElements.img.src = `https://image.tmdb.org/t/p/w500/${img}`;\n      modalElements.img.alt = title;\n      modalElements.title.textContent = title;\n      modalElements.status.textContent = status;\n      modalElements.release.textContent = release_date;\n      modalElements.rating.textContent = rating;\n      modalElements.descr.textContent = overview;\n\n      modalVideoBtn.dataset.id = videoID;\n\n      modalEl.classList.add('active');\n      document.body.style.overflow = 'hidden';\n\n      modalVideoBtn.addEventListener('click', showMovieTrailer);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      loader.classList.add('hide');\n    }\n  }\n}\n\nasync function showMovieTrailer(event) {\n  const id = event.currentTarget.dataset.id;\n\n  try {\n    const data = await fetchMovieTrailer(id);\n\n    if (!data.results.length) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: \"We couldn't find the trailer for this movie\",\n      });\n    } else {\n      const key = data.results[0].key;\n\n      const instance = basicLightbox.create(`\n    <iframe src=\"https://www.youtube.com/embed/${key}\" width=\"800\" height=\"500\" frameborder=\"0\"></iframe>\n  `);\n\n      instance.show();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["API_KEY","AUTH_TOKEN","options","BASE_URL","fetchMoviesList","query","params","fetchMovie","id","fetchPopularMovies","fetchMovieTrailer","searchForm","renderElements","event","movieName","libraryEl","loader","data","markup","title","overview","date","rate","img","error","renderPopularMovies","modalCloseBtn","renderMovieInfo","videoID","status","release_date","genres","rating","modalEl","modalVideoBtn","modalElements","showMovieTrailer","Swal","key","basicLightbox.create"],"mappings":"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"}